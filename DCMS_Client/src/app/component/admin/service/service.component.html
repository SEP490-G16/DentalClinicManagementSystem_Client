<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Agbalumo&display=swap" rel="stylesheet">

<div class="recent-orders">
  <h2 class="text-center" style="font-family: Agbalumo; font-size: 29px; margin-bottom: 20px">Thủ thuật</h2>

  <div class="row">
    <div class="col-2" style="margin-top: 10px;">
      <div class="form-group form-group-filter">
        <button href="#" class="btn button-timekeeping float-right" data-bs-toggle="modal"
          data-bs-target="#addGroupModal"><i class="bi bi-plus-circle"></i> Thêm mới
        </button>
      </div>
    </div>
    <div class="col-3"></div>

    <div class="col-5" style="margin-top: 10px;">
      <section class="table__header">
        <h1></h1>
        <div class="input-group">
          <input type="search search-custom" placeholder="Tìm kiếm" [(ngModel)]="searchTerm"
            (input)="onSearchInputChange()">
        </div>
      </section>
    </div>
    <div class="col-2" style="margin-top: 10px;">
      <button href="#" class="btn button-timekeeping float-end" data-bs-toggle="modal" data-bs-target="#addServiceModal"
        style="margin-right: 1rem"><i class="bi bi-plus-circle"></i> Thêm mới
      </button>
    </div>
  </div>
  <div class="row" style="padding: 5px">
    <div class="col-4 table-container">
      <table>
        <thead class="sticky-thead">
          <tr>
            <th>Mã nhóm</th>
            <th>Tên nhóm thủ thuật</th>
            <th class="text-center">Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of medicalProcedureGroups" [ngClass]="{'new-recordd': t.isNew,'pulsee': t.isPulsing}">
            <td>{{t.medical_procedure_group_id}}</td>
            <td><a (click)="getMedicalProcedureList(t.medical_procedure_group_id)"
                class="title-group-service">{{t.name}}</a></td>
            <td class="text-center">
              <button href="#" class="btn btn-primary float-right btn-rounded" data-bs-toggle="modal"
                data-bs-target="#editGroupModal"
                (click)="openEditGroupService(t.medical_procedure_group_id,t.name,t.description)"
                style="padding: 2px 5px; margin-right: 3px"><i class="bi bi-pencil-square"></i></button>
              <button href="#" class="btn btn-danger float-right btn-rounded"
                (click)="deleteMedicalProcedureGroup(t.medical_procedure_group_id)" style="padding: 2px 5px;"><i
                  class="bi bi-trash"></i></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-8 table-container" style="padding: 0 10px">
      <table>
        <thead class="sticky-thead">
          <tr>
            <th>Mã TT</th>
            <th>Tên thủ thuật</th>
            <th>Nhóm thủ thuật</th>
            <th>Đơn giá</th>
            <th>Mô tả</th>
            <th class="text-center">Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let s of medicalProcedureList">
            <td>{{s.mp_id}}</td>
            <td class="truncate" data-bs-toggle="tooltip" title="{{s.mp_name}}">
              {{s.mp_name}}
            </td>
            <td>{{s.mg_name}}</td>
            <td>{{s.mp_price}}</td>
            <td>{{s.mp_description}}</td>
            <td class="text-center">
              <button href="#" class="btn btn-primary float-right btn-rounded"
                style="padding: 2px 5px; margin-right: 3px" data-bs-toggle="modal" data-bs-target="#editServiceModal"
                (click)="openEditService(s.mp_id,s)"><i class="bi bi-pencil-square"></i></button>
              <button href="#" style="padding: 2px 5px" class="btn btn-danger float-right btn-rounded"
                (click)="deleteMedicalProcedure(s.mp_id)">
                <!--data-bs-toggle="modal" data-bs-target="#delete_service"--> <i class="bi bi-trash"></i></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<app-popup-add-group-service [medicalProcedureGroups]="medicalProcedureGroups"></app-popup-add-group-service>
<app-popup-delete-group-service></app-popup-delete-group-service>
<app-popup-add-service [medicalProcedureList]="medicalProcedureList"
  [medicalProcedureGroups]="medicalProcedureGroups"></app-popup-add-service>
<app-popup-delete-service></app-popup-delete-service>
<app-popup-edit-group-service [id]="id" [name]="name" [description]="description"
  [medicalProcedureGroups]="medicalProcedureGroups"></app-popup-edit-group-service>
<app-popup-edit-service [medicalProcedureGroups]="medicalProcedureGroups" [medicalProcedureList]="medicalProcedureList"
  [serviceObject]="service" [id]="idService"></app-popup-edit-service>